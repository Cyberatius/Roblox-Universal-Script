-- Roblox servisleri
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = game:GetService("Workspace").CurrentCamera
local TweenService = game:GetService("TweenService")

-- GUI için ScreenGui oluştur
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer.PlayerGui

-- Ana Frame (GUI)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 400)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.Parent = ScreenGui

-- Başlık
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, 0, 0.1, 0)
TitleLabel.Text = "Aimbot & ESP"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 24
TitleLabel.BackgroundTransparency = 1
TitleLabel.Parent = MainFrame

-- Aimbot On/Off Butonu
local AimbotButton = Instance.new("TextButton")
AimbotButton.Size = UDim2.new(0.8, 0, 0.1, 0)
AimbotButton.Position = UDim2.new(0.1, 0, 0.2, 0)
AimbotButton.Text = "Toggle Aimbot"
AimbotButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AimbotButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
AimbotButton.TextSize = 18
AimbotButton.Parent = MainFrame

-- ESP On/Off Butonu
local ESPButton = Instance.new("TextButton")
ESPButton.Size = UDim2.new(0.8, 0, 0.1, 0)
ESPButton.Position = UDim2.new(0.1, 0, 0.4, 0)
ESPButton.Text = "Toggle ESP"
ESPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ESPButton.TextSize = 18
ESPButton.Parent = MainFrame

-- Aimbot aktiflik durumu
local aimbotEnabled = false
local espEnabled = false

-- Aimbot işlevi
local function Aimbot()
    while aimbotEnabled do
        local closestTarget = nil
        local shortestDistance = math.huge
        
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local targetPos = player.Character.HumanoidRootPart.Position
                local screenPos = Camera:WorldToScreenPoint(targetPos)
                local distance = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)).Magnitude
                
                if distance < shortestDistance then
                    closestTarget = player
                    shortestDistance = distance
                end
            end
        end
        
        if closestTarget then
            local targetPos = closestTarget.Character.HumanoidRootPart.Position
            local direction = (targetPos - Camera.CFrame.Position).unit
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + direction)
        end
        
        wait(0.1)  -- Bu kısmı FPS'e göre ayarlayabilirsiniz.
    end
end

-- ESP işlevi
local function ESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local box = Instance.new("BillboardGui")
            box.Size = UDim2.new(0, 150, 0, 150)
            box.StudsOffset = Vector3.new(0, 3, 0)
            box.AlwaysOnTop = true
            box.Parent = player.Character

            local frame = Instance.new("Frame")
            frame.Size = UDim2.new(1, 0, 1, 0)
            frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            frame.BackgroundTransparency = 0.5
            frame.Parent = box
        end
    end
end

-- Aimbot ve ESP'yi Toggle etme
AimbotButton.MouseButton1Click:Connect(function()
    aimbotEnabled = not aimbotEnabled
    if aimbotEnabled then
        AimbotButton.Text = "Aimbot: ON"
        Aimbot()  -- Aimbot çalıştır
    else
        AimbotButton.Text = "Aimbot: OFF"
    end
end)

ESPButton.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    if espEnabled then
        ESPButton.Text = "ESP: ON"
        ESP()  -- ESP'yi çalıştır
    else
        ESPButton.Text = "ESP: OFF"
        -- ESP'yi devre dışı bırakmak için, ESP kutularını kaldırabilirsiniz.
    end
end)

-- GUI animasyonu
MainFrame.Position = UDim2.new(0.5, -200, 1.5, -200)  -- Başta dışarıda
MainFrame:TweenPosition(UDim2.new(0.5, -200, 0.5, -200), "Out", "Sine", 0.5, true)
